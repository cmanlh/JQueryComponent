"use strict";!function(b){$JqcLoader.importCss($JqcLoader.getCmpParentURL("com.lifeonwalden.jqc","layoutHelper").concat("css/layoutHelper.css")).execute(function(){var f=37,d=38,h=39,v=40,p=45,y=46,m=17,g="over",u={"^class$":[g],"^jqc.*$":!0,"^contenteditable$":!0},w=!1;function k(t,e){var a=b(t).clone();a.find("*").each(o),e.val(a.html())}function o(t,e){for(var l=b(e),r=e.attributes,s=[],a=function(t){var e=r[t],o=e.nodeName,n=e.nodeValue;for(var a in u){var c=u[a];new RegExp(a,"g").test(o)&&(!0===c?s.push(o):b.isArray(c)&&function(){var a=[];c.forEach(function(e){n.split(" ").forEach(function(t){new RegExp(t,"g").test(e)||a.push(t)})}),l.attr(o,a.join(" "))}())}},o=0;o<r.length;o++)a(o);l.removeAttr(s.join(" "))}b.fn.extend({computerSize:function(){var c,u=b(this),i=b("<textarea readonly>"),l=null,r=[],t=b("<button>编辑</button>");b("<style>.".concat(g,"{outline: red dashed;}</style>")).appendTo("head"),this.parent().append(t).append(i),t.click(function(t){var e=b(t.target);"编辑"==e.text()?(u.hide(),k(u,i),i.removeAttr("readonly"),e.text("保存")):(e.text("编辑"),u.html(i.val()),u.show(),i.attr("readonly","readonly"))}),u.off("click.layout").on("click.layout","div.row>div",function(t){if(0<r.length&&!w)for(;c=r.pop();)c.removeClass(g);var e=(l=b(t.target).closest("div[class!=row]")).data("time");if(console.log(+new Date-e),e&&+new Date-e<500&&l.attr("contenteditable",!0).off("blur.layout change.layout").on({"blur.layout":function(t){b(t.target).removeAttr("contenteditable")}}),l.data("time",+new Date),l.parent("div").hasClass("row"))if(l.hasClass(g))l.removeClass(g);else{l.addClass(g);var a=l.attr("class");if(a){var o=[],n=[];a.split(" ").forEach(function(t){t.match(/^col-/)?o.push(t):n.push(t)}),o.length<=0&&o.push("col-md-1 col-lg-1")}r.push(l),b(document).off("keydown.layout keyup.layout").on({"keydown.layout":function(t){var e=+new Date;w=!1;var l=u.find("."+g);if(!(l.length<=0)){var r=0,s=0;switch(t.keyCode){case f:case v:r=-1;break;case d:case h:r=1;break;case p:s=1;break;case y:s=-1;break;case m:return void(w=!0);default:return}for(var a=function(t){var o=[],n=r,c=s,e=b(l[t]);(e.attr("class")||"").split(" ").forEach(function(t){if(t.match(/^col-/)){var e=0,a=t.match(/(\d+)/);a&&(e=+a[1]),t.match(/offset-/)?c=s+e:n=r+e}else o.push(t)});var a="";(r&&0<n||0<n)&&(a=a.concat("col-md-".concat(n," col-lg-").concat(n))),(s&&0<c||0<c)&&(a&&(a=a.concat(" ")),a=a.concat("col-md-offset-".concat(c," col-lg-offset-").concat(c))),o.unshift(a),e.attr("class",o.join(" "))},o=0;o<l.length;o++)a(o);k(u,i),console.log("cost: "+(+new Date-e)+"(ms)")}},"keyup.layout":function(t){w=!1}})}else l=null}).off("keyup.layout").on("keyup.layout",function(){k(u,i)})}})})}(jQuery);