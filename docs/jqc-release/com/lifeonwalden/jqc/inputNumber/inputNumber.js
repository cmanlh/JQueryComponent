"use strict";!function(l){$JqcLoader.importComponents("com.lifeonwalden.jqc",["baseElement","valHooks","format","uniqueKey"]).execute(function(){function o(t){t.processing=!0;var e="",n=t.input.value.length;if(0<n){for(var i=t.input.selectionStart,o=0,u=0,a=!1,s=0;s<n;s++){var r=t.input.value.charCodeAt(s);if(47<r&&r<58){if(a){if(!(u<t.options.decimals))break;u++}e=e.concat(t.input.value.charAt(s)),s<i&&o++}else if(46==r||12290==r||65294==r){if(a)break;e=e.concat("."),a=!0,s<i&&o++}else if(65295<r&&r<65306){if(a){if(!(u<t.options.decimals))break;u++}e=e.concat(String.fromCharCode(r-65248)),s<i&&o++}else 0!=s||45!=r&&65293!=r||(e=e.concat("-"),s<i&&o++)}t.formatted=t.input.value=l.jqcFormat.number(e,{decimals:t.options.decimals,toRound:!1});var c=e.indexOf(".")==o?t.formatted.indexOf("."):function(t,e){for(var n=e,i=0,o=0;o<e;i++)44==t.charCodeAt(i)?n++:o++;return n}(t.formatted,o);t.input.setSelectionRange(c,c),t.currentVal=e}else t.currentVal=t.formatted=t.input.value="";t.processing=!1,t.inputting=!1}l.jqcInputNumber=function(t){0<arguments.length&&l.jqcBaseElement.apply(this,arguments),this.options=l.extend(!0,{},{element:null,decimals:0},t),this.el=this.options.element,this.input=this.el.get(0),this.typeName="jqcInputNumber",this.elementId="jqc".concat(l.jqcUniqueKey.fetchIntradayKey()),this.el.attr(l.jqcBaseElement.JQC_ELEMENT_TYPE,this.typeName),this.el.attr(l.jqcBaseElement.JQC_ELEMENT_ID,this.elementId),l.jqcValHooksCtrl.addElement(this),this.currentVal="",this.formatted="",this.inputting=!1,this.processing=!1;var e=this,n=null,i=!1;e.el.keyup(function(t){switch(16==t.keyCode&&(n&&clearTimeout(n),i=!0,n=setTimeout(function(){i=!1,n=null},10)),t.keyCode){case l.ui.keyCode.LEFT:case l.ui.keyCode.RIGHT:return;case l.ui.keyCode.DELETE:case l.ui.keyCode.BACKSPACE:-1!=e.formatted.indexOf(".")&&-1==e.input.value.indexOf(".")&&(e.input.value=e.input.value.substr(0,e.input.selectionStart))}e.formatted!=e.input.value&&(e.processing?t.preventDefault():(e.inputting||(e.inputting=!0),o(e)))}),e.el.on("paste",function(t){setTimeout(function(){o(e)},10)}),e.el.on("input",function(t){i&&o(e)})},l.jqcInputNumber.prototype=new l.jqcBaseElement,l.jqcInputNumber.prototype.constructor=l.jqcInputNumber,l.jqcInputNumber.prototype.updateCurrentVal=function(t){if(null==t||null==t||0==t.length)this.currentVal=this.formatted="";else{this.formatted=l.jqcFormat.number(t,{decimals:this.options.decimals,toRound:!1});var e=t.indexOf(".");0==this.options.decimals?this.currentVal=-1==e?t:t.substr(0,e):this.currentVal=-1==e?t:t.substr(0,e+this.options.decimals+1)}return this.formatted}})}(jQuery);